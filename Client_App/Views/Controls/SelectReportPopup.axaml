<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:converter="clr-namespace:Client_App.VisualRealization.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Client_App.Views.Controls.SelectReportPopup">
	<UserControl.Resources>
		<converter:LogicalNotConverter x:Key="LogicalNotConverter"/>
	</UserControl.Resources>
	
	<StackPanel>
		<Button Command="{Binding SwitchNextReportCommand}"
				Grid.Row="0"
				VerticalContentAlignment="Center"
				Height="75"
				FontSize="48"
				Content="ðŸ •"/>
		
		<Button  Name="ToggleButton" 
				 Content="Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ñ‚Ñ‡ÐµÑ‚" 
				 Command="{Binding OpenPopupCommand}">
		</Button>
		<Popup Name="PartPopup"
				IsOpen="{Binding PopupIsOpen, Mode=TwoWay}"
				PlacementTarget="{Binding ElementName=ToggleButton}"
				PlacementMode="Right"
				IsLightDismissEnabled="True">
			<Border Background="White"
					BorderBrush="Gray"
					BorderThickness="1"
					CornerRadius="4"
					Padding="10">
				<Grid ColumnDefinitions="Auto,Auto">
					<StackPanel Grid.Column="0" IsVisible="{Binding IsForm1}">
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="1.1" Command="{Binding SetCurrentFormNum}" CommandParameter="1.1"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="1.2" Command="{Binding SetCurrentFormNum}" CommandParameter="1.2"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="1.3" Command="{Binding SetCurrentFormNum}" CommandParameter="1.3"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="1.4" Command="{Binding SetCurrentFormNum}" CommandParameter="1.4"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="1.5" Command="{Binding SetCurrentFormNum}" CommandParameter="1.5"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="1.6" Command="{Binding SetCurrentFormNum}" CommandParameter="1.6"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="1.7" Command="{Binding SetCurrentFormNum}" CommandParameter="1.7"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="1.8" Command="{Binding SetCurrentFormNum}" CommandParameter="1.8"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="1.9" Command="{Binding SetCurrentFormNum}" CommandParameter="1.9"/>
					</StackPanel>
					<StackPanel Grid.Column="0" IsVisible="{Binding IsForm2}">
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.1" Command="{Binding SetCurrentFormNum}" CommandParameter="2.1"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.2" Command="{Binding SetCurrentFormNum}" CommandParameter="2.2"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.3" Command="{Binding SetCurrentFormNum}" CommandParameter="2.3"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.4" Command="{Binding SetCurrentFormNum}" CommandParameter="2.4"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.5" Command="{Binding SetCurrentFormNum}" CommandParameter="2.5"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.6" Command="{Binding SetCurrentFormNum}" CommandParameter="2.6"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.7" Command="{Binding SetCurrentFormNum}" CommandParameter="2.7"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.8" Command="{Binding SetCurrentFormNum}" CommandParameter="2.8"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.9" Command="{Binding SetCurrentFormNum}" CommandParameter="2.9"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.10" Command="{Binding SetCurrentFormNum}" CommandParameter="2.10"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.11" Command="{Binding SetCurrentFormNum}" CommandParameter="2.11"/>
						<Button Margin="0,0,5,0" Width="30" Height="30" Content="2.12" Command="{Binding SetCurrentFormNum}" CommandParameter="2.12"/>
					</StackPanel>
					<StackPanel Grid.Column="1" >
						<TextBlock Text="Ð’Ñ‹Ð±Ð¾Ñ€ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð°"/>
					
						<!--Ð”Ð»Ñ Ñ„Ð¾Ñ€Ð¼Ñ‹ 1.X-->
						<ListBox
							IsEnabled="{Binding YearMode, Converter={StaticResource LogicalNotConverter}}"
							IsVisible="{Binding YearMode, Converter={StaticResource LogicalNotConverter}}"
							Items="{Binding ReportCollection}"
							SelectedItem="{Binding SelectedReport, Mode=TwoWay}"
							PointerReleased ="ListBox_PointerReleased"
							SelectionMode="Single">
							<ListBox.ItemTemplate>
								<DataTemplate>
									<TextBlock Height="20" Grid.Column="0">
										<TextBlock.Text>
											<MultiBinding StringFormat="{}{0} - {1}">
												<Binding Path="StartPeriod.Value"/>
												<Binding Path="EndPeriod.Value"/>
											</MultiBinding>
										</TextBlock.Text>
									</TextBlock>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>
						<!--Ð”Ð»Ñ Ð³Ð¾Ð´Ð¾Ð²Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼ 2.X Ð¸Ð»Ð¸ 4.X-->
						<ListBox
							IsEnabled="{Binding YearMode}"
							IsVisible="{Binding YearMode}"
							Items="{Binding ReportCollection}"
							SelectedItem="{Binding SelectedReport, Mode=TwoWay}"
							PointerReleased ="ListBox_PointerReleased"
							SelectionMode="Single">
							<ListBox.ItemTemplate>
								<DataTemplate>
									<TextBlock
										Height="20" Grid.Column="0"
										Text="{Binding Year.Value}"/>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>
					</StackPanel>
				</Grid>
			</Border>
		</Popup>
		<Button Command="{Binding SwitchPreviousReportCommand}"
			Grid.Row="2"
			VerticalContentAlignment="Center"
			Height="75"
			FontSize="48"
			Content="ðŸ —"/>
	</StackPanel>
	
</UserControl>
